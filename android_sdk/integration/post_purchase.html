<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Post Purchase Campaign &#8212; Talkable Documentation</title>
    <link rel="stylesheet" href="../../_static/talkable.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Advanced Usage" href="../advanced.html" />
    <link rel="prev" title="Standalone Campaign" href="standalone.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link href="../../_static/pygments-github.css" rel="stylesheet">
  <link href="../../_static/img/favicon.ico" rel="shortcut icon" />
  </head><body>
  
    <div class="header">
      <a href="../../index.html" class="header-logo">Talkable docs</a>
          <form class="search-form" action="../../search.html" method="get">
            <input type="text" class="textfield search-form-field" name="q" placeholder="Search docs" />
            <input type="submit" class="button search-form-button" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
      <div class="header-disclaimer">
        Visit
        <a href="https://www.talkable.com" target="_blank">www.talkable.com</a>
      </div>
    </div> <!-- /.header -->
  

  <div class="content-container content clearfix">
      <div class="nav">
        <ul>
<li class="toctree-l1"><a class="reference internal" href="../../campaigns.html">Talkable Campaigns</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_features.html">Advanced Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/custom_integration.html">Standard Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/shopify.html">Shopify Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/magento.html">Magento Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/demandware.html">Demandware Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_v2.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web_hooks.html">Webhooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ios_sdk.html">Talkable iOS SDK</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../android_sdk.html">Talkable Android SDK</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../getting_started.html">Getting Started</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../integration.html">Integration</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="standalone.html">Standalone Campaign</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Post Purchase Campaign</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../advanced.html">Advanced Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="../api.html">API</a></li>
<li class="toctree-l2"><a class="reference internal" href="../custom_deep_linking.html">Integration with Third Party Deep Linking Services</a></li>
<li class="toctree-l2"><a class="reference internal" href="../testing.html">Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../upgrade.html">Upgrade</a></li>
</ul>
</li>
</ul>

      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="post-purchase-campaign">
<span id="android-sdk-integration-post-purchase"></span><h1>Post Purchase Campaign<a class="headerlink" href="#post-purchase-campaign" title="Permalink to this headline">¶</a></h1>
<p>Now that we know what a Standalone campaign is, let’s take a look at one more type of Talkable
campaign — Post Purchase. It is used to convert your existing customers into Advocates after
they make a purchase.  It has the same flow as a basic Standalone campaign except this is gated
by a purchase and shown to a customer immediately after it.</p>
<p>Post Purchase campaign usually looks like a pop up right after a user made a purchase. This
campaign initializes on the order confirmation page and captures order details parameters. You
need to pass order data that includes your customer’s email address, order id, subtotal, coupon
codes used at checkout in order to close a referral loop. This allows Talkable to detect and
close the loop on a referral.</p>
<p>Here is an example of a Purchase capturing, this action should be triggered on the order confirmation page:</p>
<div class="highlight-java notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">com.talkable.sdk.Talkable</span><span class="o">;</span>
<span class="o">...</span>
<span class="n">Double</span> <span class="n">price</span> <span class="o">=</span> <span class="mf">10.99</span><span class="o">;</span>
<span class="n">Integer</span> <span class="n">quantity</span> <span class="o">=</span> <span class="mi">1</span><span class="o">;</span>
<span class="n">String</span> <span class="n">productId</span> <span class="o">=</span> <span class="s">&quot;1&quot;</span><span class="o">;</span>
<span class="n">Item</span> <span class="n">item</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Item</span><span class="o">(</span><span class="n">subtotal</span><span class="o">,</span> <span class="n">quantity</span><span class="o">,</span> <span class="n">productId</span><span class="o">);</span>
<span class="n">item</span><span class="o">.</span><span class="na">setTitle</span><span class="o">(</span><span class="s">&quot;Item Title&quot;</span><span class="o">);</span> <span class="c1">// Optional</span>
<span class="n">item</span><span class="o">.</span><span class="na">setUrl</span><span class="o">(</span><span class="s">&quot;https://site.com/product.html&quot;</span><span class="o">);</span> <span class="c1">// Optional</span>
<span class="n">item</span><span class="o">.</span><span class="na">setImageUrl</span><span class="o">(</span><span class="s">&quot;https://site.com/image.jpg&quot;</span><span class="o">);</span> <span class="c1">// Optional</span>

<span class="n">Double</span> <span class="n">subtotal</span> <span class="o">=</span> <span class="n">price</span> <span class="o">*</span> <span class="n">quantity</span><span class="o">;</span> <span class="c1">// Required</span>
<span class="n">String</span> <span class="n">orderNumber</span> <span class="o">=</span> <span class="s">&quot;123456&quot;</span><span class="o">;</span> <span class="c1">// Required</span>
<span class="n">String</span><span class="o">[]</span> <span class="n">coupons</span> <span class="o">=</span> <span class="o">{</span><span class="s">&quot;EXAMPLE-CODE-1&quot;</span><span class="o">,</span> <span class="s">&quot;EXAMPLE-CODE-2&quot;</span><span class="o">};</span> <span class="c1">// Optional</span>

<span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;</span> <span class="n">customProperties</span> <span class="o">=</span> <span class="k">new</span> <span class="n">HashMap</span><span class="o">&lt;</span><span class="n">String</span><span class="o">,</span> <span class="n">String</span><span class="o">&gt;();</span>
<span class="n">customProperties</span><span class="o">.</span><span class="na">put</span><span class="o">(</span><span class="s">&quot;property_key&quot;</span><span class="o">,</span> <span class="s">&quot;property_value&quot;</span><span class="o">);</span>

<span class="n">Customer</span> <span class="n">customer</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Customer</span><span class="o">(</span><span class="n">email</span><span class="o">);</span>
<span class="n">customer</span><span class="o">.</span><span class="na">setCustomProperties</span><span class="o">(</span><span class="n">customProperties</span><span class="o">);</span>

<span class="n">Purchase</span> <span class="n">purchase</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Purchase</span><span class="o">(</span><span class="n">subtotal</span><span class="o">,</span> <span class="n">orderNumber</span><span class="o">,</span> <span class="n">coupons</span><span class="o">);</span>
<span class="n">purchase</span><span class="o">.</span><span class="na">setCustomer</span><span class="o">(</span><span class="n">customer</span><span class="o">);</span> <span class="c1">// Required</span>
<span class="n">purchase</span><span class="o">.</span><span class="na">addItem</span><span class="o">(</span><span class="n">item</span><span class="o">);</span> <span class="c1">// Optional</span>

<span class="n">String</span> <span class="n">campaignTag</span> <span class="o">=</span> <span class="s">&quot;android-post-purchase&quot;</span><span class="o">;</span>
<span class="n">purchase</span><span class="o">.</span><span class="na">setCampaignTag</span><span class="o">(</span><span class="n">campaignTag</span><span class="o">);</span> <span class="c1">// Optional</span>

<span class="n">Activity</span> <span class="n">activity</span> <span class="o">=</span> <span class="k">this</span><span class="o">;</span>
<span class="n">Talkable</span><span class="o">.</span><span class="na">showOffer</span><span class="o">(</span><span class="n">activity</span><span class="o">,</span> <span class="n">purchase</span><span class="o">,</span> <span class="k">new</span> <span class="n">TalkableErrorCallback</span><span class="o">&lt;</span><span class="n">TalkableOfferLoadException</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="kt">void</span> <span class="nf">onError</span><span class="o">(</span><span class="n">TalkableOfferLoadException</span> <span class="n">error</span><span class="o">)</span> <span class="o">{</span>
        <span class="c1">// Error handling. Note that it runs on non UI thread</span>
    <span class="o">}</span>
<span class="o">});</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If Post Purchase campaign does not show up when testing make sure you have it live with
<cite>android-post-purchase</cite> tag on the Campaigns listing.</p>
</div>
<div class="hidden docutils container">
<div class="toctree-wrapper compound">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </div> <!-- /.content-container -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63500208-1', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>