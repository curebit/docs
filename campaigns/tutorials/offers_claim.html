<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Friend Claim Page &#8212; Talkable Documentation</title>
    
    <link rel="stylesheet" href="../../_static/talkable.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Incentive Criteria" href="incentive_criteria.html" />
    <link rel="prev" title="Advocate Share Page" href="offers_show.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link href="../../_static/pygments-github.css" rel="stylesheet">
  <link href="../../_static/img/favicon.ico" rel="shortcut icon" />
  </head>
  <body role="document">
  
    <div class="header">
      <a href="../../index.html" class="header-logo">Talkable docs</a>
          <form class="search-form" action="../../search.html" method="get">
            <input type="text" class="textfield search-form-field" name="q" placeholder="Search docs" />
            <input type="submit" class="button search-form-button" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
      <div class="header-disclaimer">
        Visit
        <a href="https://www.talkable.com" target="_blank">www.talkable.com</a>
      </div>
    </div> <!-- /.header -->
  

  <div class="content-container content clearfix">
      <div class="nav">
        <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../campaigns.html">Talkable Campaigns</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../campaign_types.html">Campaign Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../campaign_placements.html">Campaign Placements</a></li>
<li class="toctree-l2"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../tutorials.html">Tutorials</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="global.html">Global</a></li>
<li class="toctree-l3"><a class="reference internal" href="offers_show.html">Advocate Share Page</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Friend Claim Page</a></li>
<li class="toctree-l3"><a class="reference internal" href="incentive_criteria.html">Incentive Criteria</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../offers_expiration.html">Offers Expiration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../localization.html">Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../designer.html">Designer</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../advanced_features.html">Advanced Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/custom_integration.html">Custom Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/shopify.html">Shopify Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../integration/magento.html">Magento Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_v2.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web_hooks.html">Web Hooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ios_sdk.html">Talkable iOS SDK</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../android_sdk.html">Talkable Android SDK</a></li>
</ul>

      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="campaigns-tutorials-offers-claim"></span><div class="section" id="friend-claim-page">
<h1>Friend Claim Page<a class="headerlink" href="#friend-claim-page" title="Permalink to this headline">¶</a></h1>
<div class="section" id="email-gating">
<span id="tutorials-email-gating"></span><h2>Email Gating<a class="headerlink" href="#email-gating" title="Permalink to this headline">¶</a></h2>
<p>Email gating is used when you need RD to provide an email to get a
reward. It is used on the Friend Claim Page and looks like a popup with email
field, submit button, and &#8220;signup for latest news&#8221; checkbox.</p>
<p>First of all, turn on email gating in Restricted settings:</p>
<img alt="" src="../../_images/image11.png" />
<p><strong>Basic Setup</strong></p>
<p><strong>HTML:</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span>{% if gated_email != blank %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-coupon-code&quot;</span><span class="p">&gt;</span>{{ coupon_code }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-proceed-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop using this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
{% else %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-hide&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;#&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-gating-unlock&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-gating-email&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;myname@example.com&quot;</span><span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Claim your coupon code<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="c">&lt;!-- What to show after submitting email. Hidden by default! --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-show&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: none;&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-coupon-code&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-proceed-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop using this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endif %}
</pre></div>
</div>
<p><strong>JS:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$proceedLink</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-proceed-link&#39;</span><span class="p">),</span>
      <span class="nx">$gatingEmail</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-gating-email&#39;</span><span class="p">),</span>
      <span class="nx">$contentGating</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-hide&#39;</span><span class="p">),</span>
      <span class="nx">$gatingUnlock</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-gating-unlock&#39;</span><span class="p">),</span>
      <span class="nx">$contentHidden</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-show&#39;</span><span class="p">),</span>
      <span class="nx">$couponCode</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-coupon-code&#39;</span><span class="p">);</span>

  <span class="nx">Talkable</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;email_gating_passed&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$contentGating</span><span class="p">.</span><span class="nx">hide</span><span class="p">();</span>
    <span class="nx">$contentHidden</span><span class="p">.</span><span class="nx">show</span><span class="p">();</span>
    <span class="nx">$couponCode</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">coupon_code</span><span class="p">);</span> <span class="c1">// Insert coupon code</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">unlockGating</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">emailValid</span><span class="p">,</span> <span class="nx">proxyParams</span><span class="p">,</span> <span class="nx">query</span><span class="p">;</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="nx">proxyParams</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">email</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">$gatingEmail</span><span class="p">.</span><span class="nx">val</span><span class="p">());</span>
    <span class="nx">emailValid</span> <span class="o">=</span> <span class="sr">/^[^@]+@([^@\.]+\.)+[^@\.]+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">emailValid</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">query</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">param</span><span class="p">({</span><span class="nx">proxy_params</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">proxyParams</span><span class="p">,</span> <span class="p">{</span><span class="nx">email</span><span class="o">:</span> <span class="nx">email</span><span class="p">})});</span>
      <span class="nx">Talkable</span><span class="p">.</span><span class="nx">passEmailGating</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">alert</span><span class="p">(</span><span class="s2">&quot;Something isn’t right. Please try again&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">$gatingUnlock</span><span class="p">.</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">unlockGating</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p><strong>Advanced Setup</strong></p>
<ol class="arabic simple">
<li>&#8216;Click to copy&#8217; functionality for coupon code</li>
<li>&#8216;Sign up for news&#8217; checkbox</li>
<li>Email validation messages</li>
</ol>
<p><strong>HTML:</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span>{% if gated_email != blank %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-coupon-code&quot;</span><span class="p">&gt;</span>{{ coupon_code }}<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-proceed-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop using this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
{% else %}
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-hide&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">form</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;#&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-gating-unlock&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;email&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-gating-email&quot;</span> <span class="na">placeholder</span><span class="o">=</span><span class="s">&quot;myname@example.com&quot;</span><span class="p">/&gt;</span>
      <span class="p">&lt;</span><span class="nt">label</span> <span class="na">for</span><span class="o">=</span><span class="s">&quot;email-subscription&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">input</span> <span class="na">type</span><span class="o">=</span><span class="s">&quot;checkbox&quot;</span> <span class="na">checked</span><span class="o">=</span><span class="s">&quot;checked&quot;</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;email-subscription&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-gating-checkbox&quot;</span> <span class="p">/&gt;</span>
        Sign me up for the latest news
      <span class="p">&lt;/</span><span class="nt">label</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">button</span><span class="p">&gt;</span>Claim your coupon code<span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">form</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="c">&lt;!-- What to show after submitting email. Hidden by default! --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-show&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: none;&quot;</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-coupon-code&quot;</span><span class="p">&gt;</span>...<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-proceed-link&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop using this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
  <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

  <span class="c">&lt;!-- Show errors in case something&#39;s wrong with the email. Hidden by default! --&gt;</span>
  <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-validation&quot;</span> <span class="na">style</span><span class="o">=</span><span class="s">&quot;display: none;&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
{% endif %}
</pre></div>
</div>
<p><strong>JS:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="nx">$</span><span class="p">(</span><span class="nb">document</span><span class="p">).</span><span class="nx">ready</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">$proceedLink</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-proceed-link&#39;</span><span class="p">),</span>
      <span class="nx">$gatingEmail</span>    <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-gating-email&#39;</span><span class="p">),</span>
      <span class="nx">$contentGating</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-hide&#39;</span><span class="p">),</span>
      <span class="nx">$gatingUnlock</span>   <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-gating-unlock&#39;</span><span class="p">),</span>
      <span class="nx">$gatingCheckbox</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-gating-checkbox&#39;</span><span class="p">),</span>
      <span class="nx">$contentHidden</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-show&#39;</span><span class="p">),</span>
      <span class="nx">$notice</span>         <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-validation&#39;</span><span class="p">),</span>
      <span class="nx">$couponCode</span>     <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-coupon-code&#39;</span><span class="p">);</span>

  <span class="kd">function</span> <span class="nx">displayNotice</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$notice</span><span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">);</span>
    <span class="nx">$notice</span><span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$notice</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">3000</span><span class="p">);</span>
  <span class="p">}</span>

  <span class="nx">Talkable</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;email_gating_passed&#39;</span><span class="p">,</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">$contentGating</span><span class="p">.</span><span class="nx">slideUp</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">$contentHidden</span><span class="p">.</span><span class="nx">slideDown</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
      <span class="nx">$couponCode</span><span class="p">.</span><span class="nx">text</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">coupon_code</span><span class="p">);</span> <span class="c1">// Insert coupon code</span>
      <span class="nx">bindClipToCopy</span><span class="p">(</span><span class="s1">&#39;.js-coupon-code&#39;</span><span class="p">);</span>
    <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
  <span class="p">});</span>

  <span class="kd">function</span> <span class="nx">unlockGating</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="kd">var</span> <span class="nx">email</span><span class="p">,</span> <span class="nx">subChoice</span><span class="p">,</span> <span class="nx">emailValid</span><span class="p">,</span> <span class="nx">proxyParams</span><span class="p">,</span> <span class="nx">query</span><span class="p">;</span>
    <span class="nx">e</span><span class="p">.</span><span class="nx">preventDefault</span><span class="p">();</span>

    <span class="nx">proxyParams</span> <span class="o">=</span> <span class="p">{};</span>
    <span class="nx">email</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">trim</span><span class="p">(</span><span class="nx">$gatingEmail</span><span class="p">.</span><span class="nx">val</span><span class="p">());</span>
    <span class="nx">proxyParams</span><span class="p">.</span><span class="nx">sub_choice</span> <span class="o">=</span> <span class="nx">$gatingCheckbox</span><span class="p">.</span><span class="nx">is</span><span class="p">(</span><span class="s1">&#39;:checked&#39;</span><span class="p">)</span> <span class="o">?</span> <span class="s1">&#39;yes&#39;</span> <span class="o">:</span> <span class="s1">&#39;no&#39;</span><span class="p">;</span>
    <span class="nx">emailValid</span> <span class="o">=</span> <span class="sr">/^[^@]+@([^@\.]+\.)+[^@\.]+$/</span><span class="p">.</span><span class="nx">test</span><span class="p">(</span><span class="nx">email</span><span class="p">);</span>

    <span class="k">if</span> <span class="p">(</span><span class="nx">email</span><span class="p">.</span><span class="nx">length</span> <span class="o">&amp;&amp;</span> <span class="nx">emailValid</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">query</span> <span class="o">=</span> <span class="nx">$</span><span class="p">.</span><span class="nx">param</span><span class="p">({</span><span class="nx">proxy_params</span><span class="o">:</span> <span class="nx">$</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">proxyParams</span><span class="p">,</span> <span class="p">{</span><span class="nx">email</span><span class="o">:</span> <span class="nx">email</span><span class="p">})});</span>
      <span class="nx">Talkable</span><span class="p">.</span><span class="nx">passEmailGating</span><span class="p">(</span><span class="nx">query</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">displayNotice</span><span class="p">(</span><span class="s2">&quot;Something isn’t right. Please try again&quot;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="nx">$gatingUnlock</span><span class="p">.</span><span class="nx">submit</span><span class="p">(</span><span class="kd">function</span><span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">unlockGating</span><span class="p">(</span><span class="nx">e</span><span class="p">);</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<p><hr></p>
</div>
<div class="section" id="like-gating">
<span id="tutorials-like-gating"></span><h2>Like Gating<a class="headerlink" href="#like-gating" title="Permalink to this headline">¶</a></h2>
<img alt="" src="../../_images/image21.png" />
<p><strong>Basic Setup</strong></p>
<p><strong>HTML:</strong></p>
<div class="highlight-html"><div class="highlight"><pre><span></span><span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;container&quot;</span><span class="p">&gt;</span>
  {% if gated_like == blank %}
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-before&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;like-button fb_like&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">id</span><span class="o">=</span><span class="s">&quot;fb-root&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">fb:like</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ short_url }}&quot;</span> <span class="na">action</span><span class="o">=</span><span class="s">&quot;like&quot;</span> <span class="na">layout</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">show_faces</span><span class="o">=</span><span class="s">&quot;false&quot;</span> <span class="na">share</span><span class="o">=</span><span class="s">&quot;false&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">fb:like</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-after&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">data-clipboard-text</span><span class="o">=</span><span class="s">&quot;&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Click to Copy&quot;</span> <span class="na">data-copied-label</span><span class="o">=</span><span class="s">&quot;Copied!&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;promo-code js-promo-code&quot;</span><span class="p">&gt;</span>
          <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;code&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
        <span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop with this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  {% else %}
    <span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;content&quot;</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">h2</span> <span class="na">data-clipboard-text</span><span class="o">=</span><span class="s">&quot;{{ coupon_code }}&quot;</span> <span class="na">title</span><span class="o">=</span><span class="s">&quot;Click to Copy&quot;</span> <span class="na">data-copied-label</span><span class="o">=</span><span class="s">&quot;Copied!&quot;</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;promo-code js-promo-code&quot;</span><span class="p">&gt;</span>
        <span class="p">&lt;</span><span class="nt">span</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;code&quot;</span><span class="p">&gt;</span>{{ coupon_code }}<span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
      <span class="p">&lt;/</span><span class="nt">h2</span><span class="p">&gt;</span>
      <span class="p">&lt;</span><span class="nt">a</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;button&quot;</span> <span class="na">href</span><span class="o">=</span><span class="s">&quot;{{ proceed_to_merchant_path }}&quot;</span><span class="p">&gt;</span>Shop with this code<span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
    <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
  {% endif %}
<span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>

<span class="p">&lt;</span><span class="nt">div</span> <span class="na">class</span><span class="o">=</span><span class="s">&quot;js-notice&quot;</span><span class="p">&gt;&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</pre></div>
</div>
<p><strong>JS:</strong></p>
<div class="highlight-javascript"><div class="highlight"><pre><span></span><span class="kd">var</span> <span class="nx">populateCouponCode</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">couponCode</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-promo-code&#39;</span><span class="p">).</span><span class="nx">attr</span><span class="p">(</span><span class="s1">&#39;data-clipboard-text&#39;</span><span class="p">,</span> <span class="nx">couponCode</span><span class="p">);</span>
  <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-promo-code .code&#39;</span><span class="p">).</span><span class="nx">html</span><span class="p">(</span><span class="nx">couponCode</span><span class="p">);</span>
  <span class="nx">bindClipToCopy</span><span class="p">(</span><span class="s1">&#39;.js-promo-code&#39;</span><span class="p">);</span>
<span class="p">};</span>

<span class="nx">$</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
  <span class="kd">var</span> <span class="nx">notice</span>  <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-notice&#39;</span><span class="p">),</span>
      <span class="nx">timer</span><span class="p">;</span>

  <span class="nx">bindClipToCopy</span><span class="p">(</span><span class="s1">&#39;.js-promo-code&#39;</span><span class="p">);</span>

  <span class="kd">var</span> <span class="nx">displayNotice</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">data</span><span class="p">,</span> <span class="nx">delay</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">clearTimeout</span><span class="p">(</span><span class="nx">timer</span><span class="p">);</span>
    <span class="nx">notice</span>
      <span class="p">.</span><span class="nx">html</span><span class="p">(</span><span class="nx">data</span><span class="p">)</span>
      <span class="p">.</span><span class="nx">fadeIn</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="nx">timer</span> <span class="o">=</span> <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
      <span class="nx">notice</span><span class="p">.</span><span class="nx">fadeOut</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
    <span class="p">},</span> <span class="nx">delay</span> <span class="o">?</span> <span class="nx">delay</span> <span class="o">:</span> <span class="mi">5000</span><span class="p">);</span>
  <span class="p">};</span>

  <span class="nx">Talkable</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;like_gating_succeeded&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="nx">Talkable</span><span class="p">.</span><span class="nx">passLikeGating</span><span class="p">();</span>
  <span class="p">});</span>

  <span class="nx">Talkable</span><span class="p">.</span><span class="nx">subscribe</span><span class="p">(</span><span class="s1">&#39;like_gating_passed&#39;</span><span class="p">,</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">data</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">coupon_code</span><span class="p">)</span> <span class="p">{</span>
      <span class="nx">populateCouponCode</span><span class="p">(</span><span class="nx">data</span><span class="p">.</span><span class="nx">coupon_code</span><span class="p">);</span>
      <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-before&#39;</span><span class="p">).</span><span class="nx">slideUp</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
      <span class="nx">setTimeout</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="nx">$</span><span class="p">(</span><span class="s1">&#39;.js-after&#39;</span><span class="p">).</span><span class="nx">slideDown</span><span class="p">(</span><span class="mi">300</span><span class="p">);</span>
      <span class="p">},</span> <span class="mi">300</span><span class="p">);</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
      <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">&#39;No coupon provided.&#39;</span><span class="p">);</span>
      <span class="nx">displayNotice</span><span class="p">(</span><span class="s1">&#39;No coupon provided.&#39;</span><span class="p">);</span>
    <span class="p">}</span>
  <span class="p">});</span>
<span class="p">});</span>
</pre></div>
</div>
<div class="highlight-css"><div class="highlight"><pre><span></span><span class="nc">.js-after</span> <span class="p">{</span>
  <span class="nb">display</span><span class="o">:</span> <span class="nb">none</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </div> <!-- /.content-container -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63500208-1', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>