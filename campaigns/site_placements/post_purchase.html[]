<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Post Purchase &mdash; Talkable Documentation</title>
    
    <link rel="stylesheet" href="../../_static/talkable.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="Talkable Documentation" href="../../index.html" />
    <link rel="up" title="Site Placements" href="../site_placements.html" />
    <link rel="next" title="Views" href="../views.html" />
    <link rel="prev" title="Invite" href="invite.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link href="../../_static/pygments-github.css" rel="stylesheet">
  <link href="../../_static/img/favicon.ico" rel="shortcut icon" />
  </head>
  <body>
  
    <div class="header">
      <a href="../../index.html" class="header-logo">Talkable docs</a>
          <form class="search-form" action="../../search.html" method="get">
            <input type="text" class="textfield search-form-field" name="q" placeholder="Search docs" />
            <input type="submit" class="button search-form-button" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
      <div class="header-disclaimer">
        Visit
        <a href="https://www.talkable.com" target="_blank">www.talkable.com</a>
      </div>
    </div> <!-- /.header -->
  

  <div class="content-container content clearfix">
      <div class="nav">
        <ul>
<li class="toctree-l1"><a class="reference internal" href="../../ecommerce.html">E-Commerce Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../saas.html">SaaS Integrations</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../optional.html">Advanced Features</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../../campaigns.html">Talkable Campaigns</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../site_placements.html">Site Placements</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="invite.html">Invite</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Post Purchase</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../views.html">Views</a></li>
<li class="toctree-l2"><a class="reference internal" href="../tutorials.html">Tutorials</a></li>
<li class="toctree-l2"><a class="reference internal" href="../offers_expiration.html">Offers Expiration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../localization.html">Localization</a></li>
<li class="toctree-l2"><a class="reference internal" href="../editor.html">Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../designer.html">Designer</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../api_v2.html">API Reference</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../web_hooks.html">Web Hooks</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../ios_sdk.html">Talkable iOS SDK</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../android_sdk.html">Talkable Android SDK</a></li>
</ul>

      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <span class="target" id="campaigns-site-placements-post-purchase"></span><div class="section" id="post-purchase">
<span id="post-purchase-campaign"></span><h1>Post Purchase<a class="headerlink" href="#post-purchase" title="Permalink to this headline">¶</a></h1>
<p>This is a <strong>required</strong> placement because it acts as both opener and closer of the referral loop. On your final checkout receipt page (which includes things like the customer&#8217;s
order number or confirmation code) you will pass customer order data to Talkable. Passing order data is required in order to verify validity of referrals and exclude any possibility of fraud.</p>
<div class="section" id="flow">
<h2>Flow<a class="headerlink" href="#flow" title="Permalink to this headline">¶</a></h2>
<img alt="Talkable campaign flow — Post Purchase template," class="is-minimal" src="../../_images/pp.png" />
</div>
<div class="section" id="basic-integration">
<h2>Basic Integration<a class="headerlink" href="#basic-integration" title="Permalink to this headline">¶</a></h2>
<p>When the Talkable JS integration library is all set (<a class="reference internal" href="../../ecommerce/custom.html#ecommerce-custom"><em>see 1 step here</em></a>) on the order confirmation page the following integration script needs to be included:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- Begin Talkable integration code --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;talkable-offer&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">_talkable_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">purchase</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">order_number</span><span class="o">:</span> <span class="s1">&#39;100011&#39;</span><span class="p">,</span> <span class="c1">// Required - Order number</span>
      <span class="nx">subtotal</span><span class="o">:</span> <span class="s1">&#39;23.97&#39;</span><span class="p">,</span> <span class="c1">// Required - Purchase Subtotal</span>
      <span class="nx">coupon_code</span><span class="o">:</span> <span class="s1">&#39;SAVE20&#39;</span> <span class="c1">// Required - Coupon code used at checkout, multiple coupons allowed as JS array: [&#39;SAVE20&#39;, &#39;FREE-SHIPPING&#39;]. Pass null if when no coupon code was used at the checkout.</span>
    <span class="p">},</span>
    <span class="nx">customer</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;customer@example.com&#39;</span> <span class="c1">// Required - customer email</span>
    <span class="p">},</span>
    <span class="nx">campaign_tags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;post-purchase&#39;</span><span class="p">]</span> <span class="c1">// Loads Post Purchase campaign with tag &quot;post-purchase&quot;</span>
  <span class="p">};</span>

  <span class="nx">_talkableq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;register_purchase&#39;</span><span class="p">,</span> <span class="nx">_talkable_data</span><span class="p">]);</span> <span class="c1">// Pass data to Talkable and show Post Purchase campaign as a result</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- End Talkable integration code --&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<ol class="last arabic simple">
<li>Purchase subtotal amount should not include the discount, shipping, and taxes.</li>
<li>Make sure to pass email address of the customer, otherwise Purchase won&#8217;t be registered. See <a class="reference internal" href="#overriding-customer-data">Overriding Customer Data</a>.</li>
</ol>
</div>
<div class="hidden container">
<div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
</div>
</div>
<div class="section" id="including-product-items">
<h2>Including Product Items<a class="headerlink" href="#including-product-items" title="Permalink to this headline">¶</a></h2>
<p>You can also add product specific tracking to Talkable, which will let your customers share specific items that they&#8217;ve purchased. Customer shares with products have higher click through and conversion rates.</p>
<p>Below is an example with product items passed along with purchase data (notice FOR loop):</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- Begin Talkable integration code --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;talkable-offer&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">_talkable_purchase_items</span> <span class="o">=</span> <span class="p">[];</span>

  <span class="c1">// Start for loop</span>
  <span class="nx">_talkable_purchase_items</span><span class="p">.</span><span class="nx">push</span><span class="p">({</span>
    <span class="nx">product_id</span><span class="o">:</span> <span class="s1">&#39;sku1&#39;</span><span class="p">,</span> <span class="c1">// Required — Item Product ID</span>
    <span class="nx">price</span><span class="o">:</span> <span class="s1">&#39;199.00&#39;</span><span class="p">,</span> <span class="c1">// Required — Item Unit Price</span>
    <span class="nx">quantity</span><span class="o">:</span> <span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="c1">// Required — Item Quantity</span>
    <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;Awesome Product&#39;</span><span class="p">,</span> <span class="c1">// Optional — Name of product</span>
    <span class="nx">url</span><span class="o">:</span> <span class="s1">&#39;http://www.store.com/product1&#39;</span><span class="p">,</span> <span class="c1">// Optional — URL for product</span>
    <span class="nx">image_url</span><span class="o">:</span> <span class="s1">&#39;http://www.store.com/product1/image.jpg&#39;</span> <span class="c1">// Optional — URL for product image</span>
  <span class="p">});</span>
  <span class="c1">// End for loop</span>

  <span class="kd">var</span> <span class="nx">_talkable_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="nx">purchase</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">order_number</span><span class="o">:</span> <span class="s1">&#39;100011&#39;</span><span class="p">,</span> <span class="c1">// Required - Order number</span>
      <span class="nx">subtotal</span><span class="o">:</span> <span class="s1">&#39;23.97&#39;</span><span class="p">,</span> <span class="c1">// Required - Purchase Subtotal</span>
      <span class="nx">coupon_code</span><span class="o">:</span> <span class="s1">&#39;SAVE20&#39;</span><span class="p">,</span> <span class="c1">// Required - Coupon code used at checkout, multiple coupons allowed as JS array: [&#39;SAVE20&#39;, &#39;FREE-SHIPPING&#39;]. Pass null if when no coupon code was used at the checkout.</span>
      <span class="nx">items</span><span class="o">:</span> <span class="nx">_talkable_purchase_items</span>
    <span class="p">},</span>
    <span class="nx">campaign_tags</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;post-purchase&#39;</span><span class="p">]</span> <span class="c1">// Loads Post Purchase campaign with tag &quot;post-purchase&quot;</span>
  <span class="p">};</span>

  <span class="nx">_talkableq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;register_purchase&#39;</span><span class="p">,</span> <span class="nx">_talkable_data</span><span class="p">]);</span> <span class="c1">// Pass data to Talkable and show Post Purchase campaign as a result</span>
<span class="nt">&lt;/script&gt;</span>
<span class="c">&lt;!-- End Talkable integration code --&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">All product items are included into Purchase details inside Purchases report. This information is helpful for debugging.</p>
</div>
</div>
<div class="section" id="embedding-as-inline-widget">
<h2>Embedding as Inline Widget<a class="headerlink" href="#embedding-as-inline-widget" title="Permalink to this headline">¶</a></h2>
<p>Post Purchase campaign can be also embedded as inline widget somewhere on the page. For that we only require placing the Container DIV element into appropriate place on the site where Talkable iframe will be placed.</p>
<p>Next step is to go into that Post Purchase campaign inside Talkable and:</p>
<ol class="arabic simple">
<li>Visit Editor</li>
<li>Switch into HTML/CSS editor (top right corner)</li>
<li>Open Extra fields</li>
<li>Enable Responsive iframe feature by pressing &#8220;On&#8221;</li>
<li>Find Integration CSS textarea and change its CSS to position the iframe not as a popup but as inline block. Here is an example that does it:</li>
</ol>
<div class="highlight-scss"><div class="highlight"><pre>#{$iframe} {
  display: block;
  width: 100%;
}
</pre></div>
</div>
<ol class="arabic simple" start="6">
<li>Now close Extra fields and inside HTML code area remove the following lines of code:</li>
</ol>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;campaign-overlay&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<p>And remove this DIV as well:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="nt">&lt;div</span> <span class="na">class=</span><span class="s">&quot;campaign-helper&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>
</pre></div>
</div>
<ol class="arabic simple" start="7">
<li>Inside CSS area replace this code:</li>
</ol>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span><span class="nc">.signup</span><span class="o">,</span>
<span class="nt">body</span><span class="nc">.share</span> <span class="p">{</span>
    <span class="k">height</span><span class="o">:</span> <span class="m">100</span><span class="o">%</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>With this:</p>
<div class="highlight-css"><div class="highlight"><pre><span class="nt">body</span><span class="nc">.signup</span><span class="o">,</span>
<span class="nt">body</span><span class="nc">.share</span> <span class="p">{</span>
  <span class="k">overflow</span><span class="o">:</span> <span class="k">hidden</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="overriding-customer-data">
<h2>Overriding Customer Data<a class="headerlink" href="#overriding-customer-data" title="Permalink to this headline">¶</a></h2>
<p>In case you need to override customer data during Purchase registration include <cite>customer</cite> object in addition to the rest of the data:</p>
<div class="highlight-html"><div class="highlight"><pre><span class="c">&lt;!-- Place Talkable Container into appropriate place in the DOM --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">id=</span><span class="s">&quot;talkable-offer&quot;</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="nt">&lt;script&gt;</span>
  <span class="kd">var</span> <span class="nx">_talkable_data</span> <span class="o">=</span> <span class="p">{</span>
    <span class="c1">// purchase: {</span>
    <span class="c1">// ...</span>
    <span class="c1">// },</span>
    <span class="nx">customer</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">email</span><span class="o">:</span> <span class="s1">&#39;overridden@example.com&#39;</span><span class="p">,</span>
      <span class="nx">first_name</span><span class="o">:</span> <span class="s1">&#39;OverriddenName&#39;</span><span class="p">,</span>
      <span class="nx">last_name</span><span class="o">:</span> <span class="s1">&#39;OverriddenSurname&#39;</span>
    <span class="p">}</span>
  <span class="p">};</span>

  <span class="nx">_talkableq</span><span class="p">.</span><span class="nx">push</span><span class="p">([</span><span class="s1">&#39;register_purchase&#39;</span><span class="p">,</span> <span class="nx">_talkable_data</span><span class="p">]);</span>
<span class="nt">&lt;/script&gt;</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </div> <!-- /.content-container -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63500208-1', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>
