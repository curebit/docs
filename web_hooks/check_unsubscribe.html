<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Check Unsubscribe Webhook &#8212; Talkable Documentation</title>
    <link rel="stylesheet" href="../_static/talkable.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Event Webhook" href="event.html" />
    <link rel="prev" title="Unsubscribe Webhook" href="unsubscribe.html" /><link href='http://fonts.googleapis.com/css?family=Source+Code+Pro' rel='stylesheet' type='text/css'>
  <link href="../_static/pygments-github.css" rel="stylesheet">
  <link href="../_static/img/favicon.ico" rel="shortcut icon" />
  </head><body>
  
    <div class="header">
      <a href="../index.html" class="header-logo">Talkable docs</a>
          <form class="search-form" action="../search.html" method="get">
            <input type="text" class="textfield search-form-field" name="q" placeholder="Search docs" />
            <input type="submit" class="button search-form-button" value="Search" />
            <input type="hidden" name="check_keywords" value="yes" />
            <input type="hidden" name="area" value="default" />
          </form>
      <div class="header-disclaimer">
        Visit
        <a href="https://www.talkable.com" target="_blank">www.talkable.com</a>
      </div>
    </div> <!-- /.header -->
  

  <div class="content-container content clearfix">
      <div class="nav">
        <ul>
<li class="toctree-l1"><a class="reference internal" href="../campaigns.html">Talkable Campaigns</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../advanced_features.html">Advanced Features</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/custom_integration.html">Standard Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/shopify.html">Shopify Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/magento.html">Magento Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../integration/demandware.html">Demandware Integration</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api_v2.html">API Reference</a></li>
</ul>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../web_hooks.html">Webhooks</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="create_coupon.html">Create Coupons</a></li>
<li class="toctree-l2"><a class="reference internal" href="referral.html">Referral</a></li>
<li class="toctree-l2"><a class="reference internal" href="reward.html">Reward</a></li>
<li class="toctree-l2"><a class="reference internal" href="post_share.html">Post Share</a></li>
<li class="toctree-l2"><a class="reference internal" href="offer_signup.html">Advocate Signup</a></li>
<li class="toctree-l2"><a class="reference internal" href="claim_signup.html">Friend Email Gating</a></li>
<li class="toctree-l2"><a class="reference internal" href="unsubscribe.html">Unsubscribe</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Check Unsubscribe</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="event.html">Event</a></li>
</ul>
</li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ios_sdk.html">Talkable iOS SDK</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../android_sdk.html">Talkable Android SDK</a></li>
</ul>

      </div>


    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="check-unsubscribe-webhook">
<span id="web-hooks-check-unsubscribe"></span><h1>Check Unsubscribe Webhook<a class="headerlink" href="#check-unsubscribe-webhook" title="Permalink to this headline">¶</a></h1>
<p>Talkable Check Unsubscribe Webhook is used to ensure emails are not sent from
Talkable to user email addresses who have unsubscribed from the client side.
This is an optional functionality. Note: users do have the ability to unsubscribe
from Talkable referral related emails at any time from those emails directly.</p>
<h2>When does Talkable call the Check Unsubscribe Webhook?</h2><p>Talkable Check Unsubscribe Webhook is triggered on every attempt to send an
otherwise valid customer email, aimed at checking if the email is also valid on
merchant side.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p>If this Check Unsubscribe Webhook is used, the response JSON returned by
merchant must contain the following fields:</p>
<div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span> <span class="s2">&quot;result&quot;</span><span class="o">:</span> <span class="p">{</span> <span class="s2">&quot;unsubscribed&quot;</span><span class="o">:</span> <span class="kc">true</span> <span class="p">}</span> <span class="p">}</span>
</pre></div>
</div>
<p class="last">The ‘unsubscribed’ field should have a boolean value,
representing unsubscribed status according to the merchant info.</p>
</div>
<h2>Payload parameters provided</h2><ul class="simple">
<li><strong>campaign</strong> — subhash of parameters describing the campaign<ul>
<li><strong>id</strong> — unique campaign ID</li>
<li><strong>cached_slug</strong> — unique SEO friendly ID</li>
<li><strong>type</strong> — either <em>“StandaloneCampaign”</em> or <em>“DoubleSidedDealCampaign”</em></li>
<li><strong>tag_names</strong> — array of campaign’s tags</li>
</ul>
</li>
<li><strong>recipient</strong> — subhash of parameters describing the recipient<ul>
<li><strong>first_name</strong> — recipient’s first name</li>
<li><strong>last_name</strong> — recipient’s last name</li>
<li><strong>email</strong> — recipient’s email address</li>
<li><strong>username</strong> — recipient’s username</li>
<li><strong>unsubscribed_at</strong> — date recipient has unsubscribed</li>
<li><strong>subscribed_at</strong> — date person has subscribed (deprecated; use opted_in_at instead)</li>
<li><strong>opted_in_at</strong> — date recipient has subscribed</li>
<li><strong>sub_choice</strong> — subscription choice</li>
<li><strong>custom_properties</strong> — hash of recipient’s custom properties (optional)</li>
<li><strong>referral_counts</strong> - subhash of <abbr title="Person, who shares an offer with their Friend(s)">Advocate</abbr>’s referral counts<ul>
<li><strong>total</strong> — created referrals count</li>
<li><strong>approved</strong> — approved referrals count</li>
<li><strong>pending</strong> — count of waiting for approval referrals</li>
</ul>
</li>
</ul>
</li>
<li><strong>email_type</strong> — described view category</li>
</ul>
<h3>View categories</h3><p>View category can be one of the following:</p>
<ul class="simple">
<li>notifier_offers_email</li>
<li>notifier_offers_share_via_email</li>
<li>notifier_offers_share_via_email_reminder</li>
<li>advocate_rewards_confirmation</li>
<li>advocate_rewards_paid</li>
<li>friend_rewards_paid</li>
</ul>
<h2>Sample payload</h2><div class="highlight-javascript notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
  <span class="s2">&quot;campaign&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;id&quot;</span><span class="o">:</span> <span class="mi">509365458</span><span class="p">,</span>
    <span class="s2">&quot;type&quot;</span><span class="o">:</span> <span class="s2">&quot;StandaloneCampaign&quot;</span><span class="p">,</span>
    <span class="s2">&quot;cached_slug&quot;</span><span class="o">:</span> <span class="mi">509365458</span><span class="p">,</span>
    <span class="s2">&quot;tag_names&quot;</span><span class="o">:</span> <span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">],</span>
    <span class="s2">&quot;origin_min_age&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;origin_max_age&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;new_customer&quot;</span><span class="o">:</span> <span class="kc">null</span>
  <span class="p">},</span>
  <span class="s2">&quot;recipient&quot;</span><span class="o">:</span> <span class="p">{</span>
    <span class="s2">&quot;first_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Bob&quot;</span><span class="p">,</span>
    <span class="s2">&quot;last_name&quot;</span><span class="o">:</span> <span class="s2">&quot;Smith&quot;</span><span class="p">,</span>
    <span class="s2">&quot;email&quot;</span><span class="o">:</span> <span class="s2">&quot;referrer@example.com&quot;</span><span class="p">,</span>
    <span class="s2">&quot;username&quot;</span><span class="o">:</span> <span class="s2">&quot;username&quot;</span><span class="p">,</span>
    <span class="s2">&quot;unsubscribed_at&quot;</span><span class="o">:</span> <span class="kc">null</span><span class="p">,</span>
    <span class="s2">&quot;subscribed_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2018-09-27T22:55:40.610+03:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;opted_in_at&quot;</span><span class="o">:</span> <span class="s2">&quot;2018-09-27T22:55:40.610+03:00&quot;</span><span class="p">,</span>
    <span class="s2">&quot;sub_choice&quot;</span><span class="o">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="s2">&quot;referral_counts&quot;</span><span class="o">:</span> <span class="p">{</span>
      <span class="s2">&quot;total&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;approved&quot;</span><span class="o">:</span> <span class="mi">0</span><span class="p">,</span>
      <span class="s2">&quot;pending&quot;</span><span class="o">:</span> <span class="mi">0</span>
    <span class="p">}</span>
  <span class="p">},</span>
  <span class="s2">&quot;email_type&quot;</span><span class="o">:</span> <span class="s2">&quot;notifier_offers_email&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<h2>cURL example</h2><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>curl --data <span class="s1">&#39;key=&lt;key&gt;&amp;site=&lt;site&gt;&amp;type=check_unsubscribe_web_hook&amp;payload={&quot;campaign&quot;:{&quot;id&quot;:509365458,&quot;type&quot;:&quot;StandaloneCampaign&quot;,&quot;cached_slug&quot;:509365458,&quot;tag_names&quot;:[&quot;default&quot;],&quot;origin_min_age&quot;:null,&quot;origin_max_age&quot;:null,&quot;new_customer&quot;:null},&quot;recipient&quot;:{&quot;first_name&quot;:&quot;Bob&quot;,&quot;last_name&quot;:&quot;Smith&quot;,&quot;email&quot;:&quot;referrer@example.com&quot;,&quot;username&quot;:&quot;username&quot;,&quot;unsubscribed_at&quot;:null,&quot;subscribed_at&quot;:&quot;2018-09-27T22:55:40.610+03:00&quot;,&quot;opted_in_at&quot;:&quot;2018-09-27T22:55:40.610+03:00&quot;,&quot;sub_choice&quot;:true,&quot;referral_counts&quot;:{&quot;total&quot;:0,&quot;approved&quot;:0,&quot;pending&quot;:0}},&quot;email_type&quot;:&quot;notifier_offers_email&quot;}&#39;</span> &lt;url&gt;
</pre></div>
</div>
<div class="hidden docutils container">
<div class="toctree-wrapper compound">
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
  </div> <!-- /.content-container -->
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-63500208-1', 'auto');
    ga('send', 'pageview');
  </script>
  </body>
</html>